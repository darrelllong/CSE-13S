\section{Source Code Control}

\noindent The deliverables for each of your assignments will be
maintained through your \texttt{git} repository. We are using GitLab,
which is a service coupled with the version-control capabilities of
\texttt{git}. \texttt{git} allows you to maintain multiple versions of
your source files, also known as version control. Version control is the
practice of tracking and making changes to code, such that in the event
of some accident while coding, it is always possible to restore your
code to a previous state. \texttt{git} is used through a set of commands
within a repository, a version-controlled directory that stores your
files.

\subsection{Setting Up SSH Keys}

You will first need to \emph{clone} your GitLab repository. It is highly
recommended that you use \texttt{git} over SSH rather than HTTP\@. SSH,
the \emph{Secure Socket Shell}, is a protocol that provides secure
network communication. Using \texttt{git} over SSH allows for user
authentication using SSH keys, ridding the need to enter your username
or password each time you want to push or pull changes to your GitLab
repository. Other tools that use SSH include \texttt{scp} and
\texttt{sftp}. The former is a \emph{Secure Copy Protocol} designed to
transfer files to and from servers over an SSH connection. The latter is
a \emph{SSH File Transfer Protocol} and is typically used as a remote
file system protocol.

SSH keys come in \emph{pairs}: a \emph{private} key and a \emph{public}
key. Data encrypted with some public key can only be decrypted with the
corresponding private key and vice versa; public key cryptography. You
may find it useful to keep a copy of your SSH keys somewhere --- like a
USB stick. As long as you have access to the keys, you can securely
authenticate with \texttt{git}. To generate an SSH keypair:

\begin{shlisting}{}
$ ssh-keygen
\end{shlisting}

This assumes the use of \textsc{Unix}, or on macOS --- attend section if
you wish to learn how to generate a key pair on Windows.

The SSH keypair generated by the default prompt answers will be
sufficient for your needs for use with GitLab. These keys last a long
time, so try not to lose them. Make sure you add the \emph{public} key
of the generated key pair to GitLab and that it is an RSA key. To print
your public key so that you can copy it to your clipboard, enter the
following:

\begin{shlisting}{}
$ cat ~/.ssh/id_rsa.pub
\end{shlisting}

This specific command uses the \textsc{Unix} utility \texttt{cat}, which
is designed to concatenate and print files. The argument supplied to
\texttt{cat} is the path to your public key. All keys generated by
\texttt{ssh-keygen} reside under the \texttt{ssh} directory. After
adding the key, you will be ready to clone your GitLab repository. For
more in-depth instructions on generating and adding SSH keys, as well as
other GitLab basics, please refer to this link:

\centerline{\url{https://git.ucsc.edu/help/gitlab-basics/README.md}}

\subsection{Cloning Your Repository}

To clone your repository, run the following command, substituting
\texttt{<CruzID>} with your CruzID:

\begin{shlisting}{}
$ git clone git@git.ucsc.edu:cse13s/winter2022/<CruzID>.git cse13s
\end{shlisting}

You will be prompted for permission to authenticate with the server.
When permitted, the command will clone your repository onto your machine into a
directory named \texttt{cse13s} in the current working directory. Use the
\texttt{cd} command to enter the \texttt{asgn0} directory in your cloned
\texttt{cse13s} repository to start your work for assignment 0.

\begin{shlisting}{}
$ cd cse13s/asgn0
\end{shlisting}

\subsection{The \texttt{.ssh} Directory and File Permissions}

We'll take a moment here to discuss the contents of the
\texttt{\textasciitilde/.ssh} directory found on macOS and
\textsc{Unix}-based systems \footnote{The \texttt{\textasciitilde/.ssh}
directory equivalent on Windows is typically \texttt{C:\textbackslash
Users\textbackslash<username>\textbackslash.ssh}. Your coursework,
however, should be done on Ubuntu 20.04 or later.}, along with basic
file permissions on \textsc{Unix}. There are two files of note, other
than generated public and private keys:
\texttt{\textasciitilde/.ssh/known\_hosts} and
\texttt{\textasciitilde/.ssh/authorized\_keys}.

The \texttt{\textasciitilde/.ssh/known\_hosts} file contains the SSH
fingerprints of every remote machine you choose to SSH onto. Whenever
you try to SSH onto a new machine, a prompt will appear asking if you
want to continue connecting, where an affirmative response will cause
the remote machine's SSH fingerprint to be \emph{appended} to the known
hosts file.

The \texttt{\textasciitilde/.ssh/authorized\_keys} file contains the
public keys of all remote clients that are authorized to remotely log
onto the server using SSH authentication, the server in which is the
machine that contains the file of authorized keys.

Each of the aforementioned SSH-related files, including the public and
private keys, require specific \emph{file permissions}. File permissions
on \textsc{Unix} are what allow you as a user to read and modify (write)
files, as well as what prevents others from being able to read and
modify files. File permissions are split into three access groups:
\begin{enumerate}
  \item User --- the owner of the file, typically the user that created
    the file.
  \item Group --- a specific set of users.
  \item Other --- anyone who isn't the user or part of the authorized
    group.
\end{enumerate}
These three access groups each have three access modes:
\begin{enumerate}
  \item Read --- the ability to view the contents of a file.
  \item Write --- the ability to modify or delete the contents of a
    file.
  \item Execute --- the ability to run a file as a program.
\end{enumerate}
Note that the three access modes were described with files in mind.
\textsc{Unix} directories are also considered files, but the access
modes do slightly different things. Read permission for a directory
allows permitted users to list files in the directory with a program such as
\texttt{ls}. Write permission for a directory allows permitted users to
modify, create, or delete files in the directory. Lastly, execute
permission for a directory allows permitted users to access files within
the directory, as well as make the directory their current working
directory by using a shell builtin such as \texttt{cd} or
\texttt{pushd}.

The granting and removal of file permissions can be done using the
\texttt{chmod} utility, typically specifying the desired permissions
with three \emph{octal} digits. Why octal? There are exactly two states that
each permission can be in: read permission is granted, or it isn't. As a
bit, this means either a 0 or 1. Since there are read, write, and
execute permissions, this naturally means $2^3 = 8$ possible states,
which can be perfectly expressed using one octal digit. Since there are
three different access groups (user, group, and other), three octal
digits are used. Consider the octal value $6_8$. In binary, this is
$110_2$. The read bit is the most significant bit, the execute bit is
the least significant bit, and the write bit is between the two. For
this specific example, only the read and write bits are set.

The permissions of your \texttt{\textasciitilde/.ssh} directory should
be \texttt{700}. The leftmost octal digit signifies user permissions,
the middle octal digit signifies group permissions, and the rightmost
octal digit signifies other permissions. Thus, the permissions on this
directory allows only the user to enter it, as well as read and modify
files. To explicitly set the permissions as \texttt{700} using
\texttt{chmod}:

\begin{shlisting}{}
$ chmod 700 ~/.ssh
\end{shlisting}

Read the \texttt{man} page for \texttt{chmod}, then make sure the
permissions for the files in your SSH directory are set as follows:
\begin{itemize}
  \item \texttt{known\_hosts} --- \texttt{644}
  \item \texttt{authorized\_keys} --- \texttt{600}
  \item any private key --- \texttt{600}
  \item any public key --- \texttt{644}
\end{itemize}

You can create as many public and private keys with \texttt{ssh-keygen}
as you want, but you really \emph{only need one}.
