// BSD License
#include "LICENSE.h"

#include <stdint.h>
#include <stdio.h>

static uint8_t bits[] = { 0, 1, 1, 2, 1, 2, 2, 3, 1, 2, 2, 3, 2, 3, 3, 4, 1, 2, 2, 3, 2, 3, 3, 4, 2,
    3, 3, 4, 3, 4, 4, 5, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3,
    4, 4, 5, 4, 5, 5, 6, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3,
    4, 4, 5, 4, 5, 5, 6, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4,
    5, 5, 6, 5, 6, 6, 7, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3,
    4, 4, 5, 4, 5, 5, 6, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4,
    5, 5, 6, 5, 6, 6, 7, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4,
    5, 5, 6, 5, 6, 6, 7, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7, 4, 5, 5, 6, 5, 6, 6, 7, 5,
    6, 6, 7, 6, 7, 7, 8 };

uint32_t count8(uint8_t b) {
    return bits[b];
}

uint32_t count16(uint16_t h) {
    return bits[h & 0x00ff] + bits[(h & 0xff00) >> 8];
}

uint32_t count32(uint32_t w) {
    return bits[w & 0x000000ff] + bits[(w & 0x0000ff00) >> 8] + bits[(w & 0x00ff0000) >> 16]
           + bits[(w & 0xff000000) >> 24];
}

uint32_t count64(uint64_t l) {
    return bits[l & 0x00000000000000ff] + bits[(l & 0x000000000000ff00) >> 8]
           + bits[(l & 0x0000000000ff0000) >> 16] + bits[(l & 0x00000000ff000000) >> 24]
           + bits[(l & 0x000000ff00000000) >> 32] + bits[(l & 0x0000ff0000000000) >> 40]
           + bits[(l & 0x00ff000000000000) >> 48] + bits[(l & 0xff00000000000000) >> 56];
}

int main(void) {
    for (uint32_t i = 0; i < (1 << 16); i += 1) {
        printf("%x = %d\n", i, count32(i));
    }
    return 0;
}
